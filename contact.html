<!DOCTYPE html>
<html lang="uk">
<head>
    <!-- Мета-теги, стили (как в исходном коде) ... -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- SITE TITLE -->
    <title>Контакти | Швидкий запуск сайту для вашого бізнесу</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:300i,400,400i,500,600,700,800" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="fonts/font-awesome.min.css" rel="stylesheet">
    <link href="fonts/themify-icons.css" rel="stylesheet">
    <link rel="icon" href="images/favicon.jpg">
    <link href="css/owl.carousel.min.css" rel="stylesheet">
    <link href="css/owl.theme.default.min.css" rel="stylesheet">
    <link href="css/lightbox.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/normalize.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
</head>

<body data-spy="scroll" data-offset="80">
<!-- Все остальное содержимое страницы (шапка, навигация, и т.д.) -->

<section id="contact" class="section_padding">
    <div class="container">
    <div class="section_heading text-center wow zoomIn">
        <h2>Зв'яжіться <span>з нами</span></h2>
        <p>Ми завжди раді відповісти на ваші запитання та допомогти з запуском вашого сайту.</p>

        <div class="section_heading_border">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <div class="contact-form-area">
        <form id="contact-form" action="/api/send-message" method="POST">  <!-- Укажите правильный путь к serverless function -->
            <input type="text" name="name" placeholder="Ваше ім'я:" required>
            <input type="email" name="email" placeholder="Ваш email:" required><br>
            <textarea name="message" cols="30" rows="6" placeholder="Ваше повідомлення:" required></textarea><br>
            <div class="submit-area text-center">
                <button type="submit" class="main_btn submit btn">Відправити</button>
            </div>
        </form>
        <p id="form-messages" class="ajax-response text-center"></p>
    </div>
    </div>
</section>

<!-- Подвал, скрипты ... -->
<section class="copyright_area">
    <div class="copyright text-center">
        <div class="copy_text">
            <p>Copyright © 2024 | Всі права захищені</p>
        </div>
    </div>
</section>

<!-- Start jQuery -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.min.js"></script>
<script src="js/modernizr-2.8.3.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/isotope.pkgd.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/lightbox.min.js"></script>
<script src="js/jquery.inview.min.js"></script>
<script src="js/scrolltopcontrol.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/main.js"></script>
<script>
    const form = document.getElementById('contact-form');
    const formMessages = document.getElementById('form-messages');

    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        try {
            const response = await fetch('/api/send-message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });

            const result = await response.json();

            if (response.ok) {
                formMessages.textContent = result.message;
                // formMessages.classList.add('success-message');  // Если нужны стили
                // formMessages.classList.remove('error-message');
                form.reset();
            } else {
                formMessages.textContent = result.error || 'Помилка при відправці повідомлення.';
                // formMessages.classList.add('error-message');
                // formMessages.classList.remove('success-message');
            }
        } catch (error) {
            console.error('Error:', error);
            formMessages.textContent = 'Сталася несподівана помилка.';
            // formMessages.classList.add('error-message');
            // formMessages.classList.remove('success-message');
        }
    });
</script>
<!-- End jQuery -->
</body>
</html>
